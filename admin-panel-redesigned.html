
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Admin Panel Redesigned</title>
  <style>
    body {
      background: #1e1e1e;
      color: white;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    h2 {
      color: #90ee90;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: #2c2c2c;
      padding: 20px;
      border-radius: 10px;
    }
    .row {
      display: flex;
      align-items: center;
      margin: 12px 0;
      gap: 10px;
      flex-wrap: wrap;
    }
    .row input, .row select {
      padding: 6px 10px;
      font-size: 14px;
      border-radius: 4px;
      border: none;
      width: 150px;
    }
    .row label {
      width: 100px;
    }
    .row button {
      padding: 6px 10px;
      font-size: 16px;
      margin: 0 3px;
      border-radius: 4px;
      border: none;
      cursor: pointer;
    }
    .action-btn {
      background: #4caf50;
      color: white;
    }
    .counter-btn {
      background: #555;
      color: white;
    }
    .submit-btn {
      background: #2196f3;
      color: white;
      width: 100%;
      margin-top: 20px;
      padding: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Admin Panel</h2>

    <div class="row">
      <label for="teamSelect">Edit Team:</label>
      <select id="teamSelect"></select>
    </div>

    <div class="row">
      <label>Team Name:</label>
      <input type="text" id="teamName">
    </div>

    <div class="row">
      <label>Logo Path:</label>
      <input type="text" id="teamLogo">
    </div>

    <div class="row">
      <label>Kills:</label>
      <button class="counter-btn" onclick="adjust('kills', -1)">-</button>
      <input type="text" id="kills" value="0">
      <button class="counter-btn" onclick="adjust('kills', 1)">+</button>
    </div>

    <div class="row">
      <label>Alive:</label>
      <button class="counter-btn" onclick="adjust('alive', -1)">-</button>
      <input type="text" id="alive" value="0">
      <button class="counter-btn" onclick="adjust('alive', 1)">+</button>
    </div>

    <button class="submit-btn" onclick="updateTeam()">Push/Update Team</button>
  </div>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDIO3wksMFhs4j8FzI9VwTX_4sGJ1r12-0",
      authDomain: "team-overlay.firebaseapp.com",
      databaseURL: "https://team-overlay-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "team-overlay",
      storageBucket: "team-overlay.firebasestorage.app",
      messagingSenderId: "751537440201",
      appId: "1:751537440201:web:ee16879d25632d4bb1d418"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let teams = {};

    function adjust(field, delta) {
      const input = document.getElementById(field === 'kills' ? 'kills' : 'alive');
      let value = parseInt(input.value) || 0;
      value = Math.max(0, Math.min(field === 'alive' ? 4 : 99, value + delta));
      input.value = value;
    }

    function populateForm(teamId) {
      const team = teams[teamId];
      if (!team) return;
      document.getElementById("teamName").value = team.name || "";
      document.getElementById("teamLogo").value = team.logo || "";
      document.getElementById("kills").value = team.kills || 0;
      document.getElementById("alive").value = team.aliveCount || 0;
    }

    function updateTeam() {
      const id = document.getElementById("teamSelect").value;
      const name = document.getElementById("teamName").value;
      const logo = document.getElementById("teamLogo").value;
      const kills = parseInt(document.getElementById("kills").value) || 0;
      const alive = parseInt(document.getElementById("alive").value) || 0;

      db.ref("teams/" + id).set({
        name,
        logo,
        kills,
        aliveCount: alive
      });
    }

    function loadTeams() {
      db.ref("teams").on("value", snapshot => {
        teams = snapshot.val() || {};
        const select = document.getElementById("teamSelect");
        select.innerHTML = "";
        Object.keys(teams).forEach(id => {
          const option = document.createElement("option");
          option.value = id;
          option.textContent = teams[id].name || id;
          select.appendChild(option);
        });
        if (select.value) populateForm(select.value);
      });

      document.getElementById("teamSelect").addEventListener("change", e => {
        populateForm(e.target.value);
      });
    }

    loadTeams();
  </script>
</body>
</html>
